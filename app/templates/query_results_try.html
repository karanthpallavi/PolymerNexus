<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>SPARQL Query Results</title>
    <style>
        /* === PAGE STYLING === */
        body {
          font-family: "Segoe UI", Roboto, sans-serif;
          background: linear-gradient(135deg, #e6f7f7, #f4f4f4);
          margin: 0;
          padding: 40px 20px;
          display: flex;
          flex-direction: column;
          align-items: center;
          min-height: 100vh;
        }

        h1 {
          color: #333;
          text-align: center;
          margin-bottom: 20px;
          font-size: 28px;
        }

        /* === RESULTS CARD === */
        .results-container {
          width: 100%;
          max-width: 1000px;
          background: #ffffff;
          border-radius: 16px;
          box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
          padding: 30px;
          overflow-x: auto;
          transition: all 0.3s ease;
        }

        .results-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          flex-wrap: wrap;
          margin-bottom: 20px;
        }

        .results-header h2 {
          color: #333;
          font-size: 20px;
          margin: 0;
        }

        /* === BUTTONS === */
        .btn {
          background-color: #33bdb1;
          color: white;
          font-weight: 600;
          padding: 10px 18px;
          border: none;
          border-radius: 8px;
          cursor: pointer;
          font-size: 14px;
          transition: background-color 0.3s, transform 0.1s;
        }

        .btn:hover {
          background-color: #28a89d;
        }

        .btn:active {
          transform: scale(0.97);
        }

        /* === TABLE STYLING === */
        table {
          width: 100%;
          border-collapse: collapse;
          font-size: 15px;
          text-align: left;
        }

        thead {
          background-color: #33bdb1;
          color: white;
        }

        th, td {
          padding: 12px 15px;
          border-bottom: 1px solid #eee;
        }

        tbody tr:hover {
          background-color: #f9f9f9;
        }

        th {
          font-weight: 600;
        }

        td {
          color: #333;
        }

        /* === FOOTER === */
        footer {
          margin-top: 30px;
          text-align: center;
          color: #666;
          font-size: 13px;
        }

        /* === RESPONSIVE === */
        @media (max-width: 768px) {
          .results-header {
            flex-direction: column;
            align-items: flex-start;
            gap: 10px;
          }

          table {
            font-size: 13px;
          }
        }
    </style>

    <script>
        // Example data - replace with actual data fetched dynamically
        const exampleResults = [
          { object: "Sample_1", prop1_quality: "Hardness_mean_value", val1: 55.2, prop2_quality: "S50", val2: 2.1 },
          { object: "Sample_2", prop1_quality: "Hardness_mean_value", val1: 58.3, prop2_quality: "S50", val2: 2.9 },
          { object: "Sample_3", prop1_quality: "Hardness_mean_value", val1: 61.7, prop2_quality: "S50", val2: 3.4 }
        ];

        window.onload = function() {
          renderResults(exampleResults);
        };

        function renderResults(data) {
          const container = document.getElementById("results-table");
          const count = data.length;
          const countLabel = document.getElementById("result-count");
          countLabel.textContent = `${count} Result${count !== 1 ? "s" : ""} Found`;

          if (count === 0) {
            container.innerHTML = "<p>No results found.</p>";
            return;
          }

          let html = `
            <table>
              <thead>
                <tr>
                  <th>Object</th>
                  <th>Property 1</th>
                  <th>Value 1</th>
                  <th>Property 2</th>
                  <th>Value 2</th>
                </tr>
              </thead>
              <tbody>
          `;

          data.forEach(row => {
            html += `
              <tr>
                <td>${row.object}</td>
                <td>${row.prop1_quality}</td>
                <td>${row.val1}</td>
                <td>${row.prop2_quality}</td>
                <td>${row.val2}</td>
              </tr>
            `;
          });

          html += "</tbody></table>";
          container.innerHTML = html;
        }

        function exportCSV() {
          const rows = [["Object", "Property 1", "Value 1", "Property 2", "Value 2"]];
          exampleResults.forEach(r => {
            rows.push([r.object, r.prop1_quality, r.val1, r.prop2_quality, r.val2]);
          });
          let csvContent = "data:text/csv;charset=utf-8," + rows.map(e => e.join(",")).join("\n");
          const link = document.createElement("a");
          link.setAttribute("href", encodeURI(csvContent));
          link.setAttribute("download", "query_results.csv");
          link.click();
        }
    </script>
</head>

<body>
<h1>SPARQL Query Results</h1>

<div class="results-container">
    <div class="results-header">
        <h2 id="result-count">Loading...</h2>
        <div>
            <button class="btn" onclick="exportCSV()">⬇️ Export CSV</button>
            <button class="btn" onclick="window.history.back()">← Back to Query</button>
        </div>
    </div>

    <div id="results-table"></div>
</div>

<footer>Generated from GraphDB SPARQL endpoint ArlanxeoPolymers | © 2025 Arlanxeo Polymer Knowledge Base</footer>
</body>
</html>